<!DOCTYPE html>
<html>
<head>
    <title>Patient Consult Summary Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }
        .form-container {
            width: 100%; /* Make the form wider */
            max-width: 800px; /* Limit max width for better readability */
            background-color: white;
            border: 2px solid #4b0082;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .bold { font-weight: bold; }
        .italic { font-style: italic; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input, .form-group select { width: 100%; padding: 8px; box-sizing: border-box; }
        h1, h2, button { color: #4b0082; } /* Dark purple accent */
        button { background-color: #4b0082; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
        button:hover { background-color: #3a006b; }
        .button-container { display: flex; justify-content: space-between; margin-top: 20px; }
        .header {
            background-color: #4b0082;
            color: white; /* Ensure the text is white */
            text-align: center;
            padding: 10px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 20px -20px;
        }
        .hidden { display: none; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #4b0082; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div class="form-container" id="formContainer">
        <div class="header">
            <h1>Patient Consult Summary: Genetic Counseling</h1>
        </div>
        <form id="geneticForm">
            <!-- Form sections omitted for brevity -->
            <div class="button-container">
                <button type="button" onclick="prevSection()">Previous</button>
                <button type="button" onclick="nextSection()">Next</button>
                <button type="button" onclick="submitForm()">Submit</button>
                <button type="button" class="hidden" onclick="backToForm()">Back to Form</button>
            </div>
        </form>
    </div>

    <div id="summaryOutput" class="hidden">
        <!-- The summary output will be displayed here -->
    </div>

    <script>
        const sections = document.querySelectorAll('.form-section');
        let currentSectionIndex = 0;

        function showSection(index) {
            sections.forEach((section, i) => {
                section.classList.toggle('active', i === index);
            });
            document.querySelector('.button-container button[type="button"][onclick="prevSection()"]').style.display = index === 0 ? 'none' : 'inline-block';
            document.querySelector('.button-container button[type="button"][onclick="nextSection()"]').style.display = index === sections.length - 1 ? 'none' : 'inline-block';
            document.querySelector('.button-container button[type="button"][onclick="submitForm()"]').style.display = index === sections.length - 1 ? 'inline-block' : 'none';
        }

        function nextSection() {
            if (currentSectionIndex < sections.length - 1) {
                currentSectionIndex++;
                showSection(currentSectionIndex);
            }
        }

        function prevSection() {
            if (currentSectionIndex > 0) {
                currentSectionIndex--;
                showSection(currentSectionIndex);
            }
        }

        showSection(currentSectionIndex);

        function toggleFreeText(selectId) {
            var selectElement = document.getElementById(selectId);
            var freeTextField = document.getElementById(selectId + 'Other');
            if (selectElement.value === 'Other') {
                freeTextField.classList.remove('hidden');
            } else {
                freeTextField.classList.add('hidden');
            }
        }

        function toggleXLinkedText() {
            var pattern = document.getElementById('inheritancePattern').value;
            var xLinkedTextContainer = document.getElementById('knownFemaleCarrierFeaturesContainer');
            if (pattern === 'X-linked') {
                xLinkedTextContainer.classList.remove('hidden');
            } else {
                xLinkedTextContainer.classList.add('hidden');
            }
        }

        function submitForm() {
            document.getElementById('formContainer').classList.add('hidden');

            var consultationDate = new Date(document.getElementById('consultationTime').value);
            var hours = consultationDate.getHours() % 12 === 0 ? 12 : consultationDate.getHours() % 12;
            var minutes = consultationDate.getMinutes() < 10 ? '0' + consultationDate.getMinutes() : consultationDate.getMinutes();
            var amPm = consultationDate.getHours() >= 12 ? 'pm' : 'am';
            var formattedDate = (consultationDate.getMonth() + 1) + '/' + consultationDate.getDate() + '/' + consultationDate.getFullYear() + ' ' + hours + ':' + minutes + amPm;
            
            var dob = new Date(document.getElementById('patientDOB').value);
            var formattedDOB = (dob.getMonth() + 1) + '/' + dob.getDate() + '/' + dob.getFullYear();
            
            var partnerDOB = new Date(document.getElementById('partnerDOB').value);
            var formattedPartnerDOB = (partnerDOB.getMonth() + 1) + '/' + partnerDOB.getDate() + '/' + partnerDOB.getFullYear();
            
            var eggState = document.getElementById('eggState').value.toLowerCase();
            var ageOfEgg = document.getElementById('ageOfEgg').value;
            var positiveGameteSource = document.getElementById('positiveGameteSource').value;
            var gene = document.getElementById('gene').value;
            var inheritancePattern = document.getElementById('inheritancePattern').value;
            var knownFemaleCarrierFeatures = document.getElementById('knownFemaleCarrierFeatures').value.trim();

            var output = "<h2 class='bold'>Patient Consult Summary - Genetic Counseling</h2>";
            output += "<table>";
            output += "<tr><th>Field</th><th>Value</th></tr>";
            output += "<tr><td><span class='bold'>Name of Genetic Counselor:</span></td><td>" + document.getElementById('counselorName').value + "</td></tr>";
            output += "<tr><td><span class='bold'>Name of Doctor:</span></td><td>" + document.getElementById('doctorName').value + "</td></tr>";
            output += "<tr><td><span class='bold'>Consultation Date & Time:</span></td><td>" + formattedDate + "</td></tr>";

            output += "<tr><td colspan='2'><h3 class='underline'>Patient Information</h3></td></tr>";
            output += "<tr><td><span class='bold'>Name:</span></td><td>" + document.getElementById('patientName').value + "</td></tr>";
            output += "<tr><td><span class='bold'>DOB:</span></td><td>" + formattedDOB + "</td></tr>";
            output += "<tr><td><span class='bold'>Gamete Type:</span></td><td>" + document.getElementById('gameteType').value + "</td></tr>";

            output += "<tr><td colspan='2'><h3 class='underline'>Partner</h3></td></tr>";
            output += "<tr><td><span class='bold'>Name:</span></td><td>" + document.getElementById('partnerName').value + "</td></tr>";
            output += "<tr><td><span class='bold'>DOB:</span></td><td>" + formattedPartnerDOB + "</td></tr>";
            output += "<tr><td><span class='bold'>Egg State:</span></td><td>" + eggState + "</td></tr>";
            output += "<tr><td><span class='bold'>Age of Egg:</span></td><td>" + ageOfEgg + "</td></tr>";
            output += "<tr><td><span class='bold'>Positive Gamete Source:</span></td><td>" + positiveGameteSource + "</td></tr>";

            output += "<tr><td colspan='2'><h3 class='underline'>Genetic Information</h3></td></tr>";
            output += "<tr><td><span class='bold'>Gene:</span></td><td>" + gene + "</td></tr>";
            output += "<tr><td><span class='bold'>Inheritance Pattern:</span></td><td>" + inheritancePattern + "</td></tr>";

            if (inheritancePattern === 'X-linked') {
                output += "<tr><td><span class='bold'>Known Female Carrier Features:</span></td><td>" + knownFemaleCarrierFeatures + "</td></tr>";
            }

            output += "</table>";

            document.getElementById('summaryOutput').innerHTML = output;
            document.getElementById('summaryOutput').classList.remove('hidden');
        }

        function backToForm() {
            document.getElementById('formContainer').classList.remove('hidden');
            document.getElementById('summaryOutput').classList.add('hidden');
        }
    </script>
</body>
</html>
